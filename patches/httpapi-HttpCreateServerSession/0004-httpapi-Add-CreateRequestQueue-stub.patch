From d7e73fff448bdb04e986eeb5c4613aa393c0ef49 Mon Sep 17 00:00:00 2001
From: Esdras Tarsis <esdrastarsis@gmail.com>
Date: Sun, 31 Mar 2019 06:18:21 -0300
Subject: [PATCH] httpapi: Add CreateRequestQueue stub.

---
 dlls/httpapi/httpapi.spec   |  1 +
 dlls/httpapi/httpapi_main.c | 11 +++++++++++
 include/http.h              |  1 +
 3 files changed, 13 insertions(+)

diff --git a/dlls/httpapi/httpapi.spec b/dlls/httpapi/httpapi.spec
index aad5d58437c..9e2f151be93 100644
--- a/dlls/httpapi/httpapi.spec
+++ b/dlls/httpapi/httpapi.spec
@@ -7,6 +7,7 @@
 @ stub HttpCreateFilter
 @ stdcall HttpCreateHttpHandle(ptr long)
 @ stdcall HttpCreateServerSession(long ptr long)
+@ stdcall HttpCreateRequestQueue(long wstr ptr long ptr)
 @ stdcall HttpCreateUrlGroup(int64 ptr long)
 @ stdcall HttpCloseServerSession(int64)
 @ stdcall HttpCloseUrlGroup(int64)
diff --git a/dlls/httpapi/httpapi_main.c b/dlls/httpapi/httpapi_main.c
index c7d95c9fbad..93822cf8c76 100644
--- a/dlls/httpapi/httpapi_main.c
+++ b/dlls/httpapi/httpapi_main.c
@@ -557,6 +557,17 @@ ULONG WINAPI HttpCloseServerSession(HTTP_SERVER_SESSION_ID id)
     return ERROR_SUCCESS;
 }
 
+/***********************************************************************
+ *        HttpCreateRequestQueue     (HTTPAPI.@)
+ */
+ULONG WINAPI HttpCreateRequestQueue( HTTPAPI_VERSION version, PCWSTR name, PSECURITY_ATTRIBUTES security, ULONG flags, PHANDLE request )
+{
+    FIXME( "({%d,%d}, %s, %p, 0x%x, %p): stub!\n",version.HttpApiMajorVersion,version.HttpApiMinorVersion,debugstr_w(name),security,flags,request ); 
+
+    *request = (HANDLE)0xbeefdead;
+    return NO_ERROR;
+}
+
 /***********************************************************************
  *        HttpCreateUrlGroup     (HTTPAPI.@)
  */
diff --git a/include/http.h b/include/http.h
index b07c3b03f93..d2f45497fc4 100644
--- a/include/http.h
+++ b/include/http.h
@@ -401,6 +401,7 @@ ULONG WINAPI HttpAddUrl(HANDLE,PCWSTR,PVOID);
 ULONG WINAPI HttpCloseServerSession(HTTP_SERVER_SESSION_ID id);
 ULONG WINAPI HttpCloseUrlGroup(HTTP_URL_GROUP_ID id);
 ULONG WINAPI HttpCreateHttpHandle(PHANDLE,ULONG);
+ULONG WINAPI HttpCreateRequestQueue(HTTPAPI_VERSION,PCWSTR,PSECURITY_ATTRIBUTES,ULONG,PHANDLE);
 ULONG WINAPI HttpCreateServerSession(HTTPAPI_VERSION,PHTTP_SERVER_SESSION_ID,ULONG);
 ULONG WINAPI HttpCreateUrlGroup(HTTP_SERVER_SESSION_ID session_id, HTTP_URL_GROUP_ID *group_id, ULONG reserved);
 ULONG WINAPI HttpDeleteServiceConfiguration(HANDLE,HTTP_SERVICE_CONFIG_ID,PVOID,ULONG,LPOVERLAPPED);
-- 
2.17.1

