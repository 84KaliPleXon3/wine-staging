From cf8d6d9dd1bb75b8b78a02e0c151fef7caa1206e Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Wed, 30 Jan 2019 16:23:25 +1100
Subject: [PATCH] httpapi: Fake success from HttpCreateServerSession

Wine-Bug: https://bugs.winehq.org/show_bug.cgi?id=46549
---
 dlls/httpapi/httpapi_main.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/dlls/httpapi/httpapi_main.c b/dlls/httpapi/httpapi_main.c
index 1b35cd656ff..3e49b825567 100644
--- a/dlls/httpapi/httpapi_main.c
+++ b/dlls/httpapi/httpapi_main.c
@@ -190,5 +190,13 @@ ULONG WINAPI HttpAddUrl( HANDLE handle, PCWSTR url, PVOID reserved )
 ULONG WINAPI HttpCreateServerSession( HTTPAPI_VERSION version, HTTP_SERVER_SESSION_ID *id, ULONG reserved )
 {
     FIXME( "({%d,%d}, %p, %d): stub!\n", version.HttpApiMajorVersion, version.HttpApiMinorVersion, id, reserved );
-    return ERROR_ACCESS_DENIED;
+
+    if(!id)
+        return ERROR_INVALID_PARAMETER;
+    if(version.HttpApiMajorVersion != 2 || version.HttpApiMinorVersion != 0)
+        return ERROR_REVISION_MISMATCH;
+
+    *id = 0xabcdefff;
+
+    return NO_ERROR;
 }
-- 
2.20.1

